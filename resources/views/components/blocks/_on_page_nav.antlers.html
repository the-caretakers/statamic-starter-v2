{{ partial:components/block }}
    {{ $columns = columns ?? 4 }}
    {{ $grid_classes = switch(
        ($columns == 2) => 'grid-cols-1 md:grid-cols-2',
        ($columns == 3) => 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3',
        ($columns == 4) => 'grid-cols-2 md:grid-cols-3 lg:grid-cols-4',
        ($columns == 5) => 'grid-cols-2 md:grid-cols-3 lg:grid-cols-5',
        ($columns == 6) => 'grid-cols-2 md:grid-cols-4 lg:grid-cols-6',
        () => 'grid-cols-2 md:grid-cols-3 lg:grid-cols-4'
    ) }}

    <!-- Desktop Grid -->
    <div class="hidden xl:grid items-center gap-4 {{ $grid_classes }}">
        {{ links }}
            {{ if link_type == 'anchor' }}
                <a href="#{{ anchor_link }}" class="group block p-4 rounded-outer border border-current hover:border-primary hover:bg-primary hover:text-white transition-all duration-200 text-center">
                    <span>{{ title ?? (anchor_link | title | replace:'u':'U') }}</span>
                </a>
            {{ elseif link_type == 'url' }}
                <a href="{{ page_link:permalink ?? page_link }}" class="group block p-4 rounded-outer border border-current hover:border-primary hover:bg-primary hover:text-white transition-all duration-200 text-center">
                    <span>{{ title ?? (page_link:title ?? 'Link') }}</span>
                </a>
            {{ /if }}
        {{ /links }}
    </div>

    <!-- Mobile/Tablet Select -->
    <div class="xl:hidden bg-gray-light p-5 rounded-outer text-gray">
        <label>
            <span class="text-xs">Go to section</span>
            <select id="on-page-nav-select" class="w-full p-3 rounded-lg border border-gray-300 bg-white text-sm">
                <option value="">Select section...</option>
                {{ links }}
                    {{ if link_type == 'anchor' }}
                        <option value="#{{ anchor_link }}">{{ title ?? (anchor_link | title | replace:'u':'U') }}</option>
                    {{ elseif link_type == 'url' }}
                        <option value="{{ page_link:permalink ?? page_link }}">{{ title ?? (page_link:title ?? 'Link') }}</option>
                    {{ /if }}
                {{ /links }}
            </select>
        </label>
    </div>
{{ /partial:components/block }}

<script>
document.addEventListener('DOMContentLoaded', function() {
    const onPageNavSelect = document.getElementById('on-page-nav-select');

    if (onPageNavSelect) {
        onPageNavSelect.addEventListener('change', function(e) {
            const value = this.value;
            if (value) {
                if (value.startsWith('#')) {
                    // For anchor links, navigate using location.hash which updates URL and scrolls
                    window.location.hash = value.substring(1);
                } else {
                    // For URL links, navigate to the page
                    window.location.href = value;
                }
                // Reset select to default option after navigation
                this.value = '';
            }
        });
    }
});
</script>
