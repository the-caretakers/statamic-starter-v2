{{# {{ partial:components/blocks/hero headline="Search" }} #}}

{{ seo_title = 'Search Results' }}

{{ partial:main }}
    {{ partial:components/blocks/hero
        title="Search"
        background_type="Colour"
        background_colour="primary"
        :no_breadcrumbs="1"
    }}

    <section class="container flex flex-col pt-16 pb-32 gap-12">
        <form action="/search" class="w-full max-w-4xl mx-auto flex gap-4">
            <label class="flex-grow">
                <div class="sr-only">Search this site</div>
                <input
                    value="{{ get:q }}"
                    x-ref="search"
                    placeholder="Search this site"
                    name="q"
                    type="text"
                    class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-primary focus:outline-none transition-colors"
                />
            </label>
            <button title="Search" type="submit" class="rounded-lg bg-primary text-white px-6 py-3 hover:opacity-90 transition-opacity flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
                </svg>
                <span class="hidden sm:inline">Search</span>
            </button>
        </form>

        {{ search:results index="default" as="results" }}
            {{ if results }}
                <div class="max-w-4xl mx-auto w-full">
                    <h2 class="font-semibold text-xl text-primary mb-8 pb-4 border-b border-gray-200">
                        {{ results | count }} {{ 'result' | plural(results | count) }} found for "{{ get:q }}"
                    </h2>
                    <div class="flex flex-col gap-6">
                        {{ results }}
                            <article class="group">
                                <a
                                    aria-label="{{ title }}"
                                    href="{{ url }}"
                                    class="flex flex-col gap-2 p-6 rounded-lg border border-gray-200 hover:border-primary transition-all"
                                >
                                    <h3 class="text-xl font-semibold text-primary-dark group-hover:underline transition-colors">
                                        {{ title }}
                                    </h3>
                                    {{ if excerpt ?? description }}
                                        <p class="text-gray-700 leading-relaxed">{{ excerpt ?? description }}</p>
                                    {{ /if }}
                                </a>
                            </article>
                        {{ /results }}
                    </div>
                </div>
            {{ elseif get:q }}
                <div class="max-w-4xl mx-auto w-full">
                    <div class="p-8 rounded-lg border-2 border-gray-200 text-center">
                        <p class="font-semibold text-lg text-primary mb-2">No results found for "{{ get:q }}"</p>
                        <p class="text-gray-600">Try adjusting your search terms or browse the site navigation</p>
                    </div>
                </div>
            {{ else }}
                {{# Could put popular searches here, or a nav #}}
            {{ /if }}
        {{ /search:results }}
    </section>
{{ /partial:main }}
